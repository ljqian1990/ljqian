<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>PHP: serialize - Manual </title>

 <link rel="shortcut icon" href="http://php.net/favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="http://php.net/manual/zh/function.serialize.php">
 <link rel="shorturl" href="http://php.net/serialize">
 <link rel="alternate" href="http://php.net/serialize" hreflang="x-default">

 <link rel="contents" href="http://php.net/manual/zh/index.php">
 <link rel="index" href="http://php.net/manual/zh/ref.var.php">
 <link rel="prev" href="http://php.net/manual/zh/function.print-r.php">
 <link rel="next" href="http://php.net/manual/zh/function.settype.php">

 <link rel="alternate" href="http://php.net/manual/en/function.serialize.php" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.serialize.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.serialize.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.serialize.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.serialize.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/ja/function.serialize.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.serialize.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.serialize.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.serialize.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.serialize.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="http://php.net/cached.php?t=1421837618&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="http://php.net/cached.php?t=1421837618&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="http://php.net/cached.php?t=1478800802&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="http://php.net/cached.php?t=1449787206&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base href="http://php.net/manual/zh/function.serialize.php">

</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="/" class="brand"><img src="/images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="/downloads">Downloads</a></li>
      <li class="active"><a href="/docs.php">Documentation</a></li>
      <li class=""><a href="/get-involved" >Get Involved</a></li>
      <li class=""><a href="/support">Help</a></li>
    </ul>
    <form class="navbar-search" id="topsearch" action="/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href='/conferences/index.php#id2017-03-30-2'>PNWPHP 2017 CfP</a></div>
<nav id="trick"><div><dl>
<dt><a href='/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='/manual/en/security.php'>Security</a></dt>
	<dd><a href='/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='/manual/en/security.globals.php'>Using Register Globals</a></dd>
	<dd><a href='/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='/manual/en/security.magicquotes.php'>Magic Quotes</a></dd>
	<dd><a href='/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='/manual/en/features.php'>Features</a></dt>
	<dd><a href='/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='/manual/en/features.safe-mode.php'>Safe Mode</a></dd>
	<dd><a href='/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='/manual/en/refs.creditcard.php'>Credit Card Processing</a></dd>
	<dd><a href='/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="function.settype.php">
          settype &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="function.print-r.php">
          &laquo; print_r        </a>
      </div>
          <ul>
            <li><a href='index.php'>PHP 手册</a></li>      <li><a href='funcref.php'>函数参考</a></li>      <li><a href='refs.basic.vartype.php'>变量与类型相关扩展</a></li>      <li><a href='book.var.php'>Variable handling</a></li>      <li><a href='ref.var.php'>Variable handling 函数</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/function.serialize.php'>English</option>
            <option value='pt_BR/function.serialize.php'>Brazilian Portuguese</option>
            <option value='zh/function.serialize.php' selected="selected">Chinese (Simplified)</option>
            <option value='fr/function.serialize.php'>French</option>
            <option value='de/function.serialize.php'>German</option>
            <option value='ja/function.serialize.php'>Japanese</option>
            <option value='ro/function.serialize.php'>Romanian</option>
            <option value='ru/function.serialize.php'>Russian</option>
            <option value='es/function.serialize.php'>Spanish</option>
            <option value='tr/function.serialize.php'>Turkish</option>
            <option value="help-translate.php">Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://edit.php.net/?project=PHP&amp;perm=zh/function.serialize.php">Edit</a>
      <a href="https://bugs.php.net/report.php?bug_type=Documentation+problem&amp;manpage=function.serialize">Report a Bug</a>
    </div>
  </div><div id="function.serialize" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">serialize</h1>
    <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">serialize</span> &mdash; <span class="dc-title">
     产生一个可存储的值的表示
    </span></p>

   </div>
   <div class="refsect1 unknown-unknown-seealsq" id="refsect1-function.serialize-unknown-unknown-seealsq">
    <h3 class="title">描述</h3>
     <div class="methodsynopsis dc-description">
      <span class="type">string</span> <span class="methodname"><strong>serialize</strong></span>
       ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.php#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
      )</div>

    <p class="simpara">
     <span class="function"><strong>serialize()</strong></span> 返回字符串，此字符串包含了表示 
     <code class="parameter">value</code> 的字节流，可以存储于任何地方。
    </p>
    <p class="simpara">
     这有利于存储或传递 PHP 的值，同时不丢失其类型和结构。
    </p>
   <p class="simpara">
    想要将已序列化的字符串变回 PHP 的值，可使用
    <span class="function"><a href="function.unserialize.php" class="function">unserialize()</a></span>。<span class="function"><strong>serialize()</strong></span>
    可处理除了 <span class="type"><a href="language.types.resource.php" class="type resource">resource</a></span> 
    之外的任何类型。甚至可以 <span class="function"><strong>serialize()</strong></span> 那些包含了指向其自身引用的数组。你正 
    <span class="function"><strong>serialize()</strong></span>  的数组／对象中的引用也将被存储。
   </p>
   <p class="simpara">
   当序列化对象时，PHP 将试图在序列动作之前调用该对象的成员函数
   <span class="function"><strong>__sleep()</strong></span>。这样就允许对象在被序列化之前做任何清除操作。类似的，当使用 
   <span class="function"><a href="function.unserialize.php" class="function">unserialize()</a></span> 恢复对象时， 将调用
   <span class="function"><strong>__wakeup()</strong></span> 成员函数。
   </p>
   
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     在 PHP 3 中，对象属性将被序列化，但是方法则会丢失。PHP 4 
     打破了此限制，可以同时存储属性和方法。请参见<a href="language.oop5.php" class="link">类与对象</a>中的<a href="language.oop5.serialization.php" class="link">序列化对象</a>部分获取更多信息。
    </p>
   </p></blockquote>
    <p class="para">
     <div class="example" id="example-6004">
      <p><strong>Example #1 <span class="function"><strong>serialize()</strong></span> 示例</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;$session_data&nbsp;是包含了当前用户&nbsp;session&nbsp;信息的多维数组。<br />//&nbsp;我们使用&nbsp;serialize()&nbsp;在请求结束之前将其存储到数据库中。<br /><br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">odbc_connect&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"webdb"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"php"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"chicken"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">odbc_prepare&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"UPDATE&nbsp;sessions&nbsp;SET&nbsp;data&nbsp;=&nbsp;?&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sqldata&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #0000BB">serialize</span><span style="color: #007700">(</span><span style="color: #0000BB">$session_data</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$PHP_AUTH_USER</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">odbc_execute&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;&amp;</span><span style="color: #0000BB">$sqldata</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">odbc_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;sessions&nbsp;(id,&nbsp;data)&nbsp;VALUES(?,&nbsp;?)"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">odbc_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;&amp;</span><span style="color: #0000BB">$sqldata</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;出错&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
   <p class="para">
    参见：<span class="function"><a href="function.unserialize.php" class="function">unserialize()</a></span>。
   </p>
   </div>

  </div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="/manual/add-note.php?sect=function.serialize&amp;redirect=http://php.net/manual/zh/function.serialize.php"><img src='/images/notes-add@2x.png' alt='add a note' width='12' height='12'> <small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">28 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="66147">  <div class="votes">
    <div id="Vu66147">
    <a href="/manual/vote-note.php?id=66147&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd66147">
    <a href="/manual/vote-note.php?id=66147&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V66147" title="81% like this...">
    172
    </div>
  </div>
  <a href="#66147" class="name">
  <strong class="user"><em>egingell at sisna dot com</em></strong></a><a class="genanchor" href="#66147"> &para;</a><div class="date" title="2006-05-15 05:12"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom66147">
<div class="phpcode"><code><span class="html">
&lt;?<br />/*<br />Anatomy of a serialize()'ed value:<br /><br /> String<br /> s:size:value;<br /><br /> Integer<br /> i:value;<br /><br /> Boolean<br /> b:value; (does not store "true" or "false", does store '1' or '0')<br /><br /> Null<br /> N;<br /><br /> Array<br /> a:size:{key definition;value definition;(repeated per element)}<br /><br /> Object<br /> O:strlen(object name):object name:object size:{s:strlen(property name):property name:property definition;(repeated per property)}<br /><br /> String values are always in double quotes<br /> Array keys are always integers or strings<br />&nbsp; &nbsp; "null =&gt; 'value'" equates to 's:0:"";s:5:"value";',<br />&nbsp; &nbsp; "true =&gt; 'value'" equates to 'i:1;s:5:"value";',<br />&nbsp; &nbsp; "false =&gt; 'value'" equates to 'i:0;s:5:"value";',<br />&nbsp; &nbsp; "array(whatever the contents) =&gt; 'value'" equates to an "illegal offset type" warning because you can't use an<br />&nbsp; &nbsp; array as a key; however, if you use a variable containing an array as a key, it will equate to 's:5:"Array";s:5:"value";',<br />&nbsp; &nbsp;&nbsp; and<br />&nbsp; &nbsp; attempting to use an object as a key will result in the same behavior as using an array will.<br />*/<br />?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107717">  <div class="votes">
    <div id="Vu107717">
    <a href="/manual/vote-note.php?id=107717&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd107717">
    <a href="/manual/vote-note.php?id=107717&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V107717" title="71% like this...">
    97
    </div>
  </div>
  <a href="#107717" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#107717"> &para;</a><div class="date" title="2012-02-28 07:44"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom107717">
<div class="phpcode"><code><span class="html">
Please! please! please! DO NOT serialize data and place it into your database. Serialize can be used that way, but that's missing the point of a relational database and the datatypes inherent in your database engine. Doing this makes data in your database non-portable, difficult to read, and can complicate queries. If you want your application to be portable to other languages, like let's say you find that you want to use Java for some portion of your app that it makes sense to use Java in, serialization will become a pain in the buttocks. You should always be able to query and modify data in the database without using a third party intermediary tool to manipulate data to be inserted. <br /><br />I've encountered this too many times in my career, it makes for difficult to maintain code, code with portability issues, and data that is it more difficult to migrate to other RDMS systems, new schema, etc. It also has the added disadvantage of making it messy to search your database based on one of the fields that you've serialized. <br /><br />That's not to say serialize() is useless. It's not... A good place to use it may be a cache file that contains the result of a data intensive operation, for instance. There are tons of others... Just don't abuse serialize because the next guy who comes along will have a maintenance or migration nightmare.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111168">  <div class="votes">
    <div id="Vu111168">
    <a href="/manual/vote-note.php?id=111168&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111168">
    <a href="/manual/vote-note.php?id=111168&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111168" title="64% like this...">
    25
    </div>
  </div>
  <a href="#111168" class="name">
  <strong class="user"><em>nh at ngin dot de</em></strong></a><a class="genanchor" href="#111168"> &para;</a><div class="date" title="2013-01-21 09:59"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom111168">
<div class="phpcode"><code><span class="html">
Serializing floating point numbers leads to weird precision offset errors:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">96.670000000000002</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br /></span><span class="comment">// 96.67<br /><br /></span><span class="keyword">echo </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">round</span><span class="keyword">(</span><span class="default">96.670000000000002</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br /></span><span class="comment">// d:96.670000000000002;<br /><br /></span><span class="keyword">echo </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">96.67</span><span class="keyword">);<br /></span><span class="comment">// d:96.670000000000002;<br /><br /></span><span class="default">?&gt;<br /></span><br />Not only is this wrong, but it adds a lot of unnecessary bulk to serialized data. Probably better to use json_encode() instead (which apparently is faster than serialize(), anyway).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="120384">  <div class="votes">
    <div id="Vu120384">
    <a href="/manual/vote-note.php?id=120384&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd120384">
    <a href="/manual/vote-note.php?id=120384&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V120384" title="66% like this...">
    1
    </div>
  </div>
  <a href="#120384" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#120384"> &para;</a><div class="date" title="2016-12-28 05:10"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom120384">
<div class="phpcode"><code><span class="html">
If you want write something strange, like string array to binary string, and you are afraid 0-days of php's serialize function, you can use this.<br /><br />Out:<br /><br />string(88) "031a000a0001004c6f72..."<br />array(3) {<br />&nbsp; [0]=&gt;<br />&nbsp; string(26) "Lorem ipsum dolor sit amet"<br />&nbsp; [1]=&gt;<br />&nbsp; string(10) "8726348723"<br />&nbsp; [2]=&gt;<br />&nbsp; string(1) "1"<br />}<br />string(152) "1c5e108afdec7c27a..."<br />array(3) {<br />&nbsp; [0]=&gt;<br />&nbsp; string(26) "Lorem ipsum dolor sit amet"<br />&nbsp; [1]=&gt;<br />&nbsp; string(10) "8726348723"<br />&nbsp; [2]=&gt;<br />&nbsp; string(1) "1"<br />}<br /><br /><span class="default">&lt;?php<br /><br />$arrToPack </span><span class="keyword">= array(</span><span class="string">'Lorem ipsum dolor sit amet'</span><span class="keyword">, </span><span class="default">8726348723</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /><br /></span><span class="default">$packer </span><span class="keyword">= new </span><span class="default">ArraysPack</span><span class="keyword">();<br /></span><span class="default">$packer</span><span class="keyword">-&gt;</span><span class="default">privateKey </span><span class="keyword">= </span><span class="default">hash</span><span class="keyword">(</span><span class="string">'sha256'</span><span class="keyword">, </span><span class="string">'k6LYiB8cnr5ESBMpVUBdC3c73Mt52p8w' </span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br /><br /></span><span class="default">$dataPacked </span><span class="keyword">= </span><span class="default">$packer</span><span class="keyword">-&gt;</span><span class="default">pack</span><span class="keyword">(</span><span class="default">$arrToPack</span><span class="keyword">);<br /></span><span class="default">$dataUnpacked </span><span class="keyword">= </span><span class="default">$packer</span><span class="keyword">-&gt;</span><span class="default">unPack</span><span class="keyword">(</span><span class="default">$dataPacked</span><span class="keyword">);<br /><br /></span><span class="default">$dataHMACPacked </span><span class="keyword">= </span><span class="default">$packer</span><span class="keyword">-&gt;</span><span class="default">hmacPack</span><span class="keyword">(</span><span class="default">$arrToPack</span><span class="keyword">);<br /></span><span class="default">$dataHMACUnpacked </span><span class="keyword">= </span><span class="default">$packer</span><span class="keyword">-&gt;</span><span class="default">hmacUnPack</span><span class="keyword">(</span><span class="default">$dataHMACPacked</span><span class="keyword">);<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bin2hex</span><span class="keyword">(</span><span class="default">$dataPacked</span><span class="keyword">));<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$dataUnpacked</span><span class="keyword">);<br /><br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">bin2hex</span><span class="keyword">(</span><span class="default">$dataHMACPacked</span><span class="keyword">));<br /></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$dataHMACUnpacked</span><span class="keyword">);<br /><br />class </span><span class="default">ArraysPack<br /></span><span class="keyword">{<br />&nbsp; &nbsp; public </span><span class="default">$hmacAlgo </span><span class="keyword">= </span><span class="string">'sha256'</span><span class="keyword">;<br />&nbsp; &nbsp; public </span><span class="default">$hmacLen </span><span class="keyword">= </span><span class="default">32</span><span class="keyword">;<br />&nbsp; &nbsp; public </span><span class="default">$privateKey </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br /><br />&nbsp; &nbsp; public function </span><span class="default">hmacPack</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if((</span><span class="default">$ret </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pack</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$hmacHash </span><span class="keyword">= </span><span class="default">hash_hmac</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hmacAlgo</span><span class="keyword">, </span><span class="default">$ret</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">privateKey</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$hmacHash</span><span class="keyword">.</span><span class="default">$ret</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; public function </span><span class="default">hmacUnPack</span><span class="keyword">(</span><span class="default">$binaryString</span><span class="keyword">)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$binaryString</span><span class="keyword">) &lt; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hmacLen</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$hmacHash </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$binaryString</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hmacLen</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$binaryString </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$binaryString</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hmacLen</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$binaryStringHash </span><span class="keyword">= </span><span class="default">hash_hmac</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hmacAlgo</span><span class="keyword">, </span><span class="default">$binaryString</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">privateKey</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Timing attack safe string comparison<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">hash_equals</span><span class="keyword">(</span><span class="default">$hmacHash</span><span class="keyword">, </span><span class="default">$binaryStringHash</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">unPack</span><span class="keyword">(</span><span class="default">$binaryString</span><span class="keyword">);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; public function </span><span class="default">pack</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$header </span><span class="keyword">= </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">, </span><span class="default">$cnt</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bin </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$cnt</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if((</span><span class="default">$strLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) &gt; </span><span class="default">65535 </span><span class="keyword">|| </span><span class="default">$strLen </span><span class="keyword">=== </span><span class="default">0</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$header </span><span class="keyword">.= </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'S'</span><span class="keyword">, </span><span class="default">$strLen</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bin </span><span class="keyword">.= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$header</span><span class="keyword">.</span><span class="default">$bin</span><span class="keyword">;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; public function </span><span class="default">unPack</span><span class="keyword">(</span><span class="default">$bin</span><span class="keyword">)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if(empty(</span><span class="default">$bin</span><span class="keyword">))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= array();<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">unpack</span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">, </span><span class="default">$bin</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">$cnt</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; if(!isset(</span><span class="default">$bin</span><span class="keyword">[</span><span class="default">$cnt </span><span class="keyword">* </span><span class="default">4</span><span class="keyword">]))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$header </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bin</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$cnt </span><span class="keyword">* </span><span class="default">4</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bin </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bin</span><span class="keyword">, (</span><span class="default">$cnt </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">unpack</span><span class="keyword">(</span><span class="string">'S'</span><span class="keyword">.</span><span class="default">$cnt</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$cnt</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bin</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arr</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bin </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$bin</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$bin </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />}<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117333">  <div class="votes">
    <div id="Vu117333">
    <a href="/manual/vote-note.php?id=117333&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117333">
    <a href="/manual/vote-note.php?id=117333&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117333" title="61% like this...">
    8
    </div>
  </div>
  <a href="#117333" class="name">
  <strong class="user"><em>MiChAeLoKGB</em></strong></a><a class="genanchor" href="#117333"> &para;</a><div class="date" title="2015-05-23 05:28"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom117333">
<div class="phpcode"><code><span class="html">
I did some testing to see the speed differences between serialize and json_encode, and my results with 250 iterations are:<br /><br />PHP serialized in 0.0651714730263 seconds average<br />JSON encoded in 0.0254955434799 seconds average<br />json_encode() was roughly 155.62% faster than serialize()<br />Test took 27.2039430141 seconds with 300 iretations.<br /><br />PHP serialized in 0.0564563179016 seconds average<br />JSON encoded in 0.0249140485128 seconds average<br />json_encode() was roughly 126.60% faster than serialize()<br />Test took 24.4148340225 seconds with 300 iretations.<br /><br />From all my tests it looks like json_encode is on average about 120% faster (sometimes it gets to about 85% and sometimes to 150%).<br /><br />Here is the PHP code you can run on your server to try it out:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="comment">// fillArray function myde by Peter Bailey<br /></span><span class="keyword">function </span><span class="default">fillArray</span><span class="keyword">(</span><span class="default">$depth</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">){<br />&nbsp; &nbsp; static </span><span class="default">$seed</span><span class="keyword">;<br />&nbsp; &nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$seed</span><span class="keyword">)){<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$seed </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (</span><span class="default">$depth </span><span class="keyword">&lt; </span><span class="default">$max</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= array();<br />&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$seed </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">fillArray</span><span class="keyword">( </span><span class="default">$depth </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">$max </span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$node</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; return </span><span class="string">'empty'</span><span class="keyword">;<br />}<br /><br />function </span><span class="default">testSpeed</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">, </span><span class="default">$iterations </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">){<br /><br />&nbsp; &nbsp; </span><span class="default">$json_time </span><span class="keyword">= array();<br />&nbsp; &nbsp; </span><span class="default">$serialize_time </span><span class="keyword">= array();<br />&nbsp; &nbsp; </span><span class="default">$test_start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br /><br />&nbsp; &nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt;= </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++){<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$json_time</span><span class="keyword">[] = </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$start</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$serialize_time</span><span class="keyword">[] = </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$start</span><span class="keyword">;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; </span><span class="default">$test_lenght </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$test_start</span><span class="keyword">;<br />&nbsp; &nbsp; </span><span class="default">$json_average </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$json_time</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$json_time</span><span class="keyword">);<br />&nbsp; &nbsp; </span><span class="default">$serialize_average </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$serialize_time</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$serialize_time</span><span class="keyword">);<br /><br />&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">"PHP serialized in "</span><span class="keyword">.</span><span class="default">$serialize_average</span><span class="keyword">.</span><span class="string">" seconds average&lt;br&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="string">"JSON encoded in "</span><span class="keyword">.</span><span class="default">$json_average</span><span class="keyword">.</span><span class="string">" seconds average&lt;br&gt;"</span><span class="keyword">;<br /><br />&nbsp; &nbsp; if (</span><span class="default">$json_average </span><span class="keyword">&lt; </span><span class="default">$serialize_average</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="string">"json_encode() was roughly "</span><span class="keyword">.</span><span class="default">number_format</span><span class="keyword">( (</span><span class="default">$serialize_average </span><span class="keyword">/ </span><span class="default">$json_average </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">) * </span><span class="default">100</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">).</span><span class="string">"% faster than serialize()&lt;br&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; } else if ( </span><span class="default">$serializeTime </span><span class="keyword">&lt; </span><span class="default">$jsonTime </span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="string">"serialize() was roughly "</span><span class="keyword">.</span><span class="default">number_format</span><span class="keyword">( (</span><span class="default">$json_average </span><span class="keyword">/ </span><span class="default">$serialize_average </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">) * </span><span class="default">100</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">).</span><span class="string">"% faster than json_encode()&lt;br&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; } else {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="string">"No way!&lt;br&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="string">"Test took "</span><span class="keyword">.</span><span class="default">$test_lenght</span><span class="keyword">.</span><span class="string">" seconds with "</span><span class="keyword">.</span><span class="default">$iterations</span><span class="keyword">.</span><span class="string">" iterations."</span><span class="keyword">;<br /><br />&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br /><br />}<br /><br /></span><span class="comment">// Change the number of iterations (250) to lower if you exceed your maximum execution time<br /></span><span class="keyword">echo </span><span class="default">testSpeed</span><span class="keyword">(</span><span class="default">fillArray</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">), </span><span class="default">250</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113305">  <div class="votes">
    <div id="Vu113305">
    <a href="/manual/vote-note.php?id=113305&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113305">
    <a href="/manual/vote-note.php?id=113305&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113305" title="60% like this...">
    10
    </div>
  </div>
  <a href="#113305" class="name">
  <strong class="user"><em>frost at easycast dot ru</em></strong></a><a class="genanchor" href="#113305"> &para;</a><div class="date" title="2013-09-23 10:56"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom113305">
<div class="phpcode"><code><span class="html">
Closures cannot be serialized:<br /><span class="default">&lt;?php<br />$func </span><span class="keyword">= function () {echo </span><span class="string">'hello!'</span><span class="keyword">;};<br /></span><span class="default">$func</span><span class="keyword">(); </span><span class="comment">// prints "hello!"<br /><br /></span><span class="default">$result </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">);&nbsp; </span><span class="comment">// Fatal error: Uncaught exception 'Exception' with message 'Serialization of 'Closure' is not allowed' <br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79187">  <div class="votes">
    <div id="Vu79187">
    <a href="/manual/vote-note.php?id=79187&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd79187">
    <a href="/manual/vote-note.php?id=79187&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V79187" title="61% like this...">
    7
    </div>
  </div>
  <a href="#79187" class="name">
  <strong class="user"><em>barbuj at NOSPAM dot yahoo dot com</em></strong></a><a class="genanchor" href="#79187"> &para;</a><div class="date" title="2007-11-14 02:19"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom79187">
<div class="phpcode"><code><span class="html">
In my specific situation, I wanted to be able to pass some data from page to page, but without relying on a session variable. The answer I came up with was to serialize() the object in question, pass it on to the next page as a hidden form field, then unserialize() it. When ALL class variables are public, this worked fine. However, if there was at least one private/protected variable, the code no longer worked as expected ("Fatal error: Call to a member function display() on a non-object in page2.php on line 4")<br /><br />As others have already mentioned, private/protected class variables will not behave nicely (private variables are prefixed by class_name + &amp;#65533;, while protected variables are only prefixed by &amp;#65533; - when looking at the page source using Firefox). Internet Explorer does NOT display the extra character between the class name and variable name, but the code still doesn't work as one would expect.<br /><br />Suppose you have a simple class:<br /><br />testclass.php<br />=============<br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">TestClass </span><span class="keyword">{<br />&nbsp; var </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br /><br />&nbsp; function </span><span class="default">display</span><span class="keyword">() {<br />&nbsp; &nbsp; echo </span><span class="string">"i=" </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">;<br />&nbsp; }<br /></span><span class="default">?&gt;<br /></span><br />page1.php<br />=========<br /><span class="default">&lt;?php<br />&nbsp; </span><span class="keyword">require_once </span><span class="string">'testclass.php'</span><span class="keyword">;<br />&nbsp; </span><span class="default">$tc </span><span class="keyword">= new </span><span class="default">TestClass</span><span class="keyword">;<br />&nbsp; </span><span class="default">$tc</span><span class="keyword">-&gt;</span><span class="default">display</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span>&lt;form method = "post" action = "page2.php"&gt;<br />&lt;input type = "hidden" name = "str" value = "<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">htmlspecialchars</span><span class="keyword">( </span><span class="default">serialize</span><span class="keyword">( </span><span class="default">$tc </span><span class="keyword">) ); </span><span class="default">?&gt;</span>"&gt;<br />&lt;input type = "submit"&gt;<br />&lt;/form&gt;<br /><br />page2.php<br />=========<br /><span class="default">&lt;?php<br />&nbsp; </span><span class="keyword">require_once </span><span class="string">'testclass.php'</span><span class="keyword">;<br />&nbsp; </span><span class="default">$tc </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">( </span><span class="default">stripslashes</span><span class="keyword">( </span><span class="default">htmlspecialchars_decode</span><span class="keyword">( </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"str"</span><span class="keyword">] ) ) );<br />&nbsp; </span><span class="default">$tc</span><span class="keyword">-&gt;</span><span class="default">display</span><span class="keyword">();<br /></span><span class="default">?&gt;<br /></span><br />The fix, suggested by evulish on #php/irc.dal.net, is to replace htmlspecialchars()/htmlspecialchars_decode() by base64_encode()/base64_decode. The code becomes:<br /><br />page1.php<br />=========<br />&lt;input type = "hidden" name = "str" value = "<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">base64_encode</span><span class="keyword">( </span><span class="default">serialize</span><span class="keyword">( </span><span class="default">$tc </span><span class="keyword">) ); </span><span class="default">?&gt;</span>"&gt;<br /><br />page2.php<br />=========<br /><span class="default">&lt;?php<br />&nbsp; $tc </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">( </span><span class="default">base64_decode</span><span class="keyword">( </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"str"</span><span class="keyword">] ) );<br /></span><span class="default">?&gt;<br /></span><br />Hope this will help someone...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58356">  <div class="votes">
    <div id="Vu58356">
    <a href="/manual/vote-note.php?id=58356&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd58356">
    <a href="/manual/vote-note.php?id=58356&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V58356" title="60% like this...">
    3
    </div>
  </div>
  <a href="#58356" class="name">
  <strong class="user"><em>stephen dot adamson at smius dot com</em></strong></a><a class="genanchor" href="#58356"> &para;</a><div class="date" title="2005-11-01 09:40"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom58356">
<div class="phpcode"><code><span class="html">
If you are serializing an object to store it in the database, using __sleep() can save you some space. The following code will not store empty (null) variables in the serialized string. For my purposes this saved a lot of space, since some of the member variables would not be given values.<br /><br />function __sleep()<br />{<br />&nbsp; &nbsp; $allVars = get_object_vars($this);<br />&nbsp; &nbsp; $toReturn = array();<br />&nbsp; &nbsp; foreach(array_keys($allVars) as $name)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if (isset($this-&gt;$name))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $toReturn[] = $name;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; return $toReturn;<br />}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60317">  <div class="votes">
    <div id="Vu60317">
    <a href="/manual/vote-note.php?id=60317&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60317">
    <a href="/manual/vote-note.php?id=60317&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60317" title="58% like this...">
    5
    </div>
  </div>
  <a href="#60317" class="name">
  <strong class="user"><em>MC_Gurk at gmx dot net</em></strong></a><a class="genanchor" href="#60317"> &para;</a><div class="date" title="2006-01-03 07:44"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom60317">
<div class="phpcode"><code><span class="html">
If you are going to serialie an object which contains references to other objects you want to serialize some time later, these references will be lost when the object is unserialized.<br />The references can only be kept if all of your objects are serialized at once.<br />That means:<br /><br />$a = new ClassA(); <br />$b = new ClassB($a); //$b containes a reference to $a;<br /><br />$s1=serialize($a);<br />$s2=serialize($b);<br /><br />$a=unserialize($s1);<br />$b=unserialize($s2);<br /><br />now b references to an object of ClassA which is not $a. $a is another object of Class A.<br /><br />use this:<br />$buf[0]=$a;<br />$buf[1]=$b;<br />$s=serialize($buf);<br />$buf=unserialize($s);<br />$a=$buf[0];<br />$b=$buf[1];<br /><br />all references are intact.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41775">  <div class="votes">
    <div id="Vu41775">
    <a href="/manual/vote-note.php?id=41775&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd41775">
    <a href="/manual/vote-note.php?id=41775&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V41775" title="58% like this...">
    2
    </div>
  </div>
  <a href="#41775" class="name">
  <strong class="user"><em>hfuecks at phppatterns dot com</em></strong></a><a class="genanchor" href="#41775"> &para;</a><div class="date" title="2004-04-21 08:20"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom41775">
<div class="phpcode"><code><span class="html">
Regarding serializing PHP data types to Javascript, following Ivans note below, theres an example at <a href="http://www.tekool.net/php/js_serializer/." rel="nofollow" target="_blank">http://www.tekool.net/php/js_serializer/.</a><br /><br />The basic serialization looks good although, in its current form, it works on the basis of generating Javascript source which a browser executes as a page loads. Using Javascripts eval() the same can be done with strings containing Javascript if youre working with something like XMLHTTPRequest</span>
</code></div>
  </div>
 </div>
  <div class="note" id="47509">  <div class="votes">
    <div id="Vu47509">
    <a href="/manual/vote-note.php?id=47509&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd47509">
    <a href="/manual/vote-note.php?id=47509&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V47509" title="57% like this...">
    3
    </div>
  </div>
  <a href="#47509" class="name">
  <strong class="user"><em>paul at moveNOtoSPAMiceland DOT com</em></strong></a><a class="genanchor" href="#47509"> &para;</a><div class="date" title="2004-11-18 08:29"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom47509">
<div class="phpcode"><code><span class="html">
I was trying to submit a serialized array through a hidden form field using POST and was having a lot of trouble with the quotes. I couldn't figure out a way to escape the quotes in the string so that they'd show up right inside the form, so only the characters up to the first set of quotes were being sent.<br /><br />My solution was to base64_encode() the string, put that in the hidden form field, and send that through the POST method. Then I decoded it (using base64_decode()) on the other end. This seemed to solve the problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109953">  <div class="votes">
    <div id="Vu109953">
    <a href="/manual/vote-note.php?id=109953&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd109953">
    <a href="/manual/vote-note.php?id=109953&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V109953" title="55% like this...">
    5
    </div>
  </div>
  <a href="#109953" class="name">
  <strong class="user"><em>Andrew B</em></strong></a><a class="genanchor" href="#109953"> &para;</a><div class="date" title="2012-09-05 09:42"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom109953">
<div class="phpcode"><code><span class="html">
When you serialize an array the internal pointer will not be preserved. Apparently this is the expected behavior but was a bit of a gotcha moment for me. Copy and paste example below.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">//Internal Pointer will be 2 once variables have been assigned.<br /></span><span class="default">$array </span><span class="keyword">= array();<br /></span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">1</span><span class="keyword">;<br /></span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">2</span><span class="keyword">;<br /></span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">3</span><span class="keyword">;<br /><br /></span><span class="comment">//Unset variables. Internal pointer will still be at 2.&nbsp; &nbsp;&nbsp; <br /></span><span class="keyword">unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br /><br /></span><span class="comment">//Serialize<br /></span><span class="default">$serializeArray </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br /><br /></span><span class="comment">//Unserialize<br /></span><span class="default">$array </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$serializeArray</span><span class="keyword">);<br /><br /></span><span class="comment">//Add a new element to the array<br />//If the internal pointer was preserved, the new array key should be 3.<br />//Instead the internal pointer has been reset, and the new array key is 0.<br /></span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">4</span><span class="keyword">;<br /><br /></span><span class="comment">//Expected Key - 3<br />//Actual Key - 0<br /></span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">, </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) , </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68220">  <div class="votes">
    <div id="Vu68220">
    <a href="/manual/vote-note.php?id=68220&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd68220">
    <a href="/manual/vote-note.php?id=68220&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V68220" title="56% like this...">
    2
    </div>
  </div>
  <a href="#68220" class="name">
  <strong class="user"><em>Ates Goral</em></strong></a><a class="genanchor" href="#68220"> &para;</a><div class="date" title="2006-07-18 11:59"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom68220">
<div class="phpcode"><code><span class="html">
Corrections/clarifications to&nbsp; "Anatomy of a serialize()'ed value":<br /><br />All strings appear inside quotes. This applies to string values, object class names and array key names. For example:<br /><br />s:3:"foo"<br />O:7:"MyClass":1:{...<br />a:2:{s:3:"bar";i:42;...<br /><br />Object property names and values are delimited by semi-colons, not colons. For example:<br /><br />O:7:"MyClass":2:{s:3:"foo";i:10;s:3:"bar";i:20}<br /><br />Double/float values are represented as:<br /><br />d:0.23241446</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96504">  <div class="votes">
    <div id="Vu96504">
    <a href="/manual/vote-note.php?id=96504&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96504">
    <a href="/manual/vote-note.php?id=96504&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96504" title="55% like this...">
    2
    </div>
  </div>
  <a href="#96504" class="name">
  <strong class="user"><em>travis at travishegner dot com</em></strong></a><a class="genanchor" href="#96504"> &para;</a><div class="date" title="2010-03-02 12:37"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom96504">
<div class="phpcode"><code><span class="html">
If serializing objects to be stored into a postgresql database, the 'null byte' injected for private and protected members throws a wrench into the system. Even pg_escape_bytea() on the value, and storing the value as a binary type fails under certain circumstances.<br /><br />For a dirty work around:<br /><span class="default">&lt;?php<br /><br />$serialized_object </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$my_object</span><span class="keyword">);<br /></span><span class="default">$safe_object </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\0"</span><span class="keyword">, </span><span class="string">"~~NULL_BYTE~~"</span><span class="keyword">, </span><span class="default">$serialized_object</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />this allows you to store the object in a readable text format as well. When reading the data back:<br /><br /><span class="default">&lt;?php<br /><br />$serialized_object </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"~~NULL_BYTE~~"</span><span class="keyword">, </span><span class="string">"\0"</span><span class="keyword">, </span><span class="default">$safe_object</span><span class="keyword">);<br /></span><span class="default">$my_object </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$serialized_object</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;<br /></span><br />The only gotcha's with this method is if your object member names or values may somehow contain the odd "~~NULL_BYTE~~" string. If that is the case, then str_replace() to a string that you are guaranteed not to have any where else in the string that serialize() returns.<br />Also remember to define the class before calling unserialize().<br /><br />If you are storing session data into a postgresql database, then this workaround is an absolute must, because the $data passed to the session's write function is already serialized.<br /><br />Thanks,<br />Travis Hegner</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48239">  <div class="votes">
    <div id="Vu48239">
    <a href="/manual/vote-note.php?id=48239&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd48239">
    <a href="/manual/vote-note.php?id=48239&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V48239" title="54% like this...">
    3
    </div>
  </div>
  <a href="#48239" class="name">
  <strong class="user"><em>wiart at yahoo dot com</em></strong></a><a class="genanchor" href="#48239"> &para;</a><div class="date" title="2004-12-16 03:40"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom48239">
<div class="phpcode"><code><span class="html">
Warning: on 64 bits machines,&nbsp; if you use a long string only composed of numbers as a key in an array and serialize/unserialize it, you can run into problems:<br /><br />an example code:<br />$arr["20041001103319"] = 'test';<br />var_dump( $arr);<br />$arr_in_str = serialize($arr);<br />print "Now result is: $arr_in_str&lt;BR /&gt;";<br />$final_arr = unserialize($arr_in_str);<br />print "The final unserialized array:&lt;BR /&gt;";<br />var_dump($final_arr);<br /><br />The result:<br />array(1) { [20041001103319]=&gt;&nbsp; string(4) "test" } <br />Now result is: a:1:{i:20041001103319;s:4:"test";}<br />The final unserialized array:<br />array(1) { [683700183]=&gt; string(4) "test" }<br /><br />As you can see, the original array :<br />$arr["20041001103319"] = "test"<br /><br />after serialize/unserialize is:<br />$arr[683700183] = "test"<br /><br />As you can see,&nbsp; the key has changed ...<br /><br />Apparently a problem of implicit casting + integer overflow (I posted a PHP bug report: <a href="http://bugs.php.net/bug.php?id=31117" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=31117</a>)<br /><br />I tested with the latest 4.3.10 compiled on my laptop (32 bits, Mandrake 9.1) --&gt; no such problem. But compiled on AMD 64 bits (Red Hat Taroon), the problem is present.<br /><br />Hope this will help some of you to not loose almost a whole day of debugging ;-)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="29079">  <div class="votes">
    <div id="Vu29079">
    <a href="/manual/vote-note.php?id=29079&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd29079">
    <a href="/manual/vote-note.php?id=29079&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V29079" title="54% like this...">
    1
    </div>
  </div>
  <a href="#29079" class="name">
  <strong class="user"><em>pli9 at itsa dot ucsf dot edu</em></strong></a><a class="genanchor" href="#29079"> &para;</a><div class="date" title="2003-01-31 11:05"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom29079">
<div class="phpcode"><code><span class="html">
I have also written some code for importing serialized PHP data into PERL and then writing it back into PHP.&nbsp; I think the similar library posted above is actually more robust for a few select cases, but mine is more compact and a little easier to follow.&nbsp; I'd really like comments if anyone finds this useful or has improvements.&nbsp; Please credit me if you use my code.<br /><br /><a href="http://www.hcs.harvard.edu/~pli/code/serialPHP.pm" rel="nofollow" target="_blank">http://www.hcs.harvard.edu/~pli/code/serialPHP.pm</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="102241">  <div class="votes">
    <div id="Vu102241">
    <a href="/manual/vote-note.php?id=102241&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102241">
    <a href="/manual/vote-note.php?id=102241&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102241" title="52% like this...">
    1
    </div>
  </div>
  <a href="#102241" class="name">
  <strong class="user"><em>pgl at yoyo dot org</em></strong></a><a class="genanchor" href="#102241"> &para;</a><div class="date" title="2011-02-03 09:13"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom102241">
<div class="phpcode"><code><span class="html">
Another suggestion for coping with binary data in serialize()d variables is just to base64_encode() those fields before serializing. It will increase the size of the variable, but not by too much.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59330">  <div class="votes">
    <div id="Vu59330">
    <a href="/manual/vote-note.php?id=59330&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59330">
    <a href="/manual/vote-note.php?id=59330&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59330" title="52% like this...">
    1
    </div>
  </div>
  <a href="#59330" class="name">
  <strong class="user"><em>Alexander Podgorny</em></strong></a><a class="genanchor" href="#59330"> &para;</a><div class="date" title="2005-12-02 11:47"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom59330">
<div class="phpcode"><code><span class="html">
Here is an example of a base class to implement object persistence using serialize and unserialize:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">Persistent<br /></span><span class="keyword">{<br />&nbsp; &nbsp; var </span><span class="default">$filename</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; </span><span class="comment">/**********************/<br />&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">Persistent</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filename </span><span class="keyword">= </span><span class="default">$filename</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filename</span><span class="keyword">)) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">();<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="comment">/**********************/<br />&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">save</span><span class="keyword">()<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$f </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filename</span><span class="keyword">,</span><span class="string">"w"</span><span class="keyword">))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(@</span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">))))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else die(</span><span class="string">"Could not write to file "</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filename</span><span class="keyword">.</span><span class="string">" at Persistant::save"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; else die(</span><span class="string">"Could not open file "</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filename</span><span class="keyword">.</span><span class="string">" for writing, at Persistant::save"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="comment">/**********************/<br />&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">open</span><span class="keyword">()<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vars </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">filename</span><span class="keyword">));<br />&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eval(</span><span class="string">"$"</span><span class="keyword">.</span><span class="string">"this-&gt;</span><span class="default">$key</span><span class="string"> = $"</span><span class="keyword">.</span><span class="string">"vars['"</span><span class="keyword">.</span><span class="string">"</span><span class="default">$key</span><span class="string">'];"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="comment">/**********************/<br /></span><span class="keyword">}<br /><br /></span><span class="default">?&gt;<br /></span><br />When an object is extended from this one it can be easily saved and re-opened using it's own methods as follows:<br /><br />&lt;?<br /><br />class foo extends Persistent<br />{<br />&nbsp;&nbsp; var $counter;<br />&nbsp;&nbsp; function inc()<br />&nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;counter++;<br />&nbsp;&nbsp; }<br />}<br /><br />$fooObj = new $foo;<br />$foo-&gt;open();<br />print $foo-&gt;counter; // displays incrementing integer as page reloads<br />$foo-&gt;inc();<br />$foo-&gt;save();<br /><br />?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113994">  <div class="votes">
    <div id="Vu113994">
    <a href="/manual/vote-note.php?id=113994&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113994">
    <a href="/manual/vote-note.php?id=113994&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113994" title="50% like this...">
    0
    </div>
  </div>
  <a href="#113994" class="name">
  <strong class="user"><em>Nanhe Kumar</em></strong></a><a class="genanchor" href="#113994"> &para;</a><div class="date" title="2013-12-27 05:57"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom113994">
<div class="phpcode"><code><span class="html">
Note : You cannot save the state of a static variable by serializing.<br /><span class="default">&lt;?php<br /></span><span class="comment">/*<br /> * student.class.php<br /> */<br /></span><span class="keyword">class </span><span class="default">Student </span><span class="keyword">{<br /><br />&nbsp; &nbsp; public </span><span class="default">$name</span><span class="keyword">;<br />&nbsp; &nbsp; private </span><span class="default">$roll</span><span class="keyword">;<br />&nbsp; &nbsp; protected </span><span class="default">$age</span><span class="keyword">;<br />&nbsp; &nbsp; static </span><span class="default">$class</span><span class="keyword">;<br /><br />&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">() {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">"Nanhe Kumar"</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roll </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">= </span><span class="default">16</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">Student</span><span class="keyword">::</span><span class="default">$class </span><span class="keyword">= </span><span class="string">"10+2"</span><span class="keyword">;<br />&nbsp; &nbsp; }<br /><br />}<br /></span><span class="default">?&gt;<br />&lt;?php<br /></span><span class="comment">/**<br /> * serialize.php<br /> */<br /></span><span class="keyword">include_once(</span><span class="string">"student.class.php"</span><span class="keyword">);<br /><br /></span><span class="comment">//Serialize<br /></span><span class="default">$so </span><span class="keyword">= new </span><span class="default">Student</span><span class="keyword">();<br /></span><span class="default">$serialized </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$so</span><span class="keyword">);<br /></span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">"test.txt"</span><span class="keyword">, </span><span class="default">$serialized</span><span class="keyword">);<br />echo </span><span class="default">$serialized</span><span class="keyword">; </span><span class="comment">//O:7:"Student":3:{s:4:"name";s:11:"Nanhe Kumar";s:13:"Studentroll";i:1;s:6:"*age";i:16;}<br /></span><span class="default">?&gt;<br />&lt;?php<br /></span><span class="comment">/**<br /> * unserialize.php<br /> */<br /></span><span class="keyword">include_once(</span><span class="string">"student.class.php"</span><span class="keyword">);<br /></span><span class="default">$content </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"test.txt"</span><span class="keyword">);<br /></span><span class="default">$unserialized </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">);<br /></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$unserialized</span><span class="keyword">);</span><span class="comment">//Student Object ( [name] =&gt; Nanhe Kumar [roll:Student:private] =&gt; 1 [age:protected] =&gt; 16 ) <br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111602">  <div class="votes">
    <div id="Vu111602">
    <a href="/manual/vote-note.php?id=111602&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111602">
    <a href="/manual/vote-note.php?id=111602&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111602" title="50% like this...">
    0
    </div>
  </div>
  <a href="#111602" class="name">
  <strong class="user"><em>allan666 at gmail.com</em></strong></a><a class="genanchor" href="#111602"> &para;</a><div class="date" title="2013-03-07 01:28"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom111602">
<div class="phpcode"><code><span class="html">
Oddly, if you serialize a class that was previously unserialized, the class of the variable changes to string... Example:<br /><br />$R = unserialize($serialized_object);<br />$R-&gt;method(); // this is ok<br />$str = serialize($R);<br />echo(get_class($R));<br /><br />this will output "string"!!!!! whereas if the first line was <br /><br />$R = new my_class(); <br /><br />it would output "my_class"!<br /><br />I don't know if that is a bug, but the manual is not clear about that! (somehow $R in serialize($R) is being passed by reference, since it changes class).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95781">  <div class="votes">
    <div id="Vu95781">
    <a href="/manual/vote-note.php?id=95781&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd95781">
    <a href="/manual/vote-note.php?id=95781&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V95781" title="45% like this...">
    -1
    </div>
  </div>
  <a href="#95781" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#95781"> &para;</a><div class="date" title="2010-01-21 09:23"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom95781">
<div class="phpcode"><code><span class="html">
you should really use mysql_real_escape_string() for escaping (serialized) strings that got thrown into a query (visit php.net/mysql_real_escape_string for further information)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93313">  <div class="votes">
    <div id="Vu93313">
    <a href="/manual/vote-note.php?id=93313&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd93313">
    <a href="/manual/vote-note.php?id=93313&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V93313" title="45% like this...">
    -2
    </div>
  </div>
  <a href="#93313" class="name">
  <strong class="user"><em>donotmail at me dot com</em></strong></a><a class="genanchor" href="#93313"> &para;</a><div class="date" title="2009-09-02 11:16"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom93313">
<div class="phpcode"><code><span class="html">
NOTE: php's serialize does not properly serialize arrays with which a slice of the array is a reference to the array itself, observe:<br /><br /><span class="default">&lt;?php<br />$a </span><span class="keyword">= array();<br /></span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"blah"</span><span class="keyword">;<br /></span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&amp; </span><span class="default">$a</span><span class="keyword">;<br /><br /></span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"pleh"</span><span class="keyword">; </span><span class="comment">// $a[0] === "pleh"<br /><br /></span><span class="default">$b </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br /><br /></span><span class="comment">// $b[0] == "pleh", $b[1][0] == "pleh"<br /><br /></span><span class="default">$b</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"blah"</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />now $b[1][0] == "blah", but $b[0] == "pleh"<br />after serializing and unserializing, slice 1 is no longer a reference to the array itself... I have found no way around this problem... even manually modifying the serialized string from <br />'a:2:{i:0;s:4:"pleh";i:1;a:2:{i:0;s:4:"pleh";i:1;R:3;}}'<br />to<br />'a:2:{i:0;s:4:"pleh";i:1;R:1;}'<br /><br />to force the second slice to be a reference to the first element of the serialization (the array itself), it seemed to work at first glance, but then unreferences it when you alter it again, observe:<br /><br /><span class="default">&lt;?php<br />&nbsp; &nbsp; $testser </span><span class="keyword">= </span><span class="string">'a:2:{i:0;s:4:"pleh";i:1;R:1;}'</span><span class="keyword">;<br /><br />&nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$testser</span><span class="keyword">);<br /><br />&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br /><br />&nbsp; &nbsp; print </span><span class="string">"\n-----------------------\n"</span><span class="keyword">;<br /><br />&nbsp; &nbsp; </span><span class="default">$tmp</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"blah"</span><span class="keyword">;<br /><br />&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br /> <br /></span><span class="default">?&gt;<br /></span><br />outputs:<br />Array<br />(<br />&nbsp; &nbsp; [0] =&gt; pleh<br />&nbsp; &nbsp; [1] =&gt; Array<br /> *RECURSION*<br />)<br /><br />-----------------------<br />Array<br />(<br />&nbsp; &nbsp; [0] =&gt; pleh<br />&nbsp; &nbsp; [1] =&gt; Array<br />&nbsp; &nbsp; &nbsp; &nbsp; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; blah<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; Array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; pleh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; Array<br /> *RECURSION*<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="3918">  <div class="votes">
    <div id="Vu3918">
    <a href="/manual/vote-note.php?id=3918&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd3918">
    <a href="/manual/vote-note.php?id=3918&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V3918" title="46% like this...">
    -1
    </div>
  </div>
  <a href="#3918" class="name">
  <strong class="user"><em>MarkRoedel at letu dot edu</em></strong></a><a class="genanchor" href="#3918"> &para;</a><div class="date" title="2000-02-21 10:58"><strong>17 years ago</strong></div>
  <div class="text" id="Hcom3918">
<div class="phpcode"><code><span class="html">
A call to serialize() appears to mess with the array's internal pointer.&nbsp; If you're going to be walking through your array after serializing it, you'll want to make a call to reset() first.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78994">  <div class="votes">
    <div id="Vu78994">
    <a href="/manual/vote-note.php?id=78994&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd78994">
    <a href="/manual/vote-note.php?id=78994&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V78994" title="43% like this...">
    -2
    </div>
  </div>
  <a href="#78994" class="name">
  <strong class="user"><em>Jeex</em></strong></a><a class="genanchor" href="#78994"> &para;</a><div class="date" title="2007-11-06 02:59"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom78994">
<div class="phpcode"><code><span class="html">
It may be worth noting that, depending on the size of the object you are serializing, the serialize function can take up a lot of memory.<br /><br />If your script isn't working as expected, your serialize call may have pushed the memory usage over the limit set by memory_limit in php.ini.<br /><br />More info on memory limits here: <a href="http://www.php.net/manual/en/ini.core.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/ini.core.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="75859">  <div class="votes">
    <div id="Vu75859">
    <a href="/manual/vote-note.php?id=75859&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75859">
    <a href="/manual/vote-note.php?id=75859&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75859" title="43% like this...">
    -3
    </div>
  </div>
  <a href="#75859" class="name">
  <strong class="user"><em>friday13 at ig dot com dot br</em></strong></a><a class="genanchor" href="#75859"> &para;</a><div class="date" title="2007-06-19 07:15"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom75859">
<div class="phpcode"><code><span class="html">
I have problem to use serialize function with hidden form field and the resolution was use htmlentities.<br /><br />Ex.:<br /><br />&lt;?<br /><br />$lista = array( 'pera', 'maça', 'laranja' );<br /><br />print "&lt; input type='hidden' name='teste' value='htmlentities( serialize( $lista ) )'" &gt;";<br /><br />?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115159">  <div class="votes">
    <div id="Vu115159">
    <a href="/manual/vote-note.php?id=115159&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115159">
    <a href="/manual/vote-note.php?id=115159&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115159" title="41% like this...">
    -2
    </div>
  </div>
  <a href="#115159" class="name">
  <strong class="user"><em>tuxedobob</em></strong></a><a class="genanchor" href="#115159"> &para;</a><div class="date" title="2014-06-04 04:36"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom115159">
<div class="phpcode"><code><span class="html">
When using serialize() to convert, say, an array to a string to pass via HTML forms, you will likely run into issues with quoting. This is because serialize() puts values in double quotes. The simplest solution is to quote your HTML form value with single quotes rather than double quotes. (This *is* allowed, according to W3C specs.)<br /><br />So, instead of:<br /><br /><span class="default">&lt;?php<br />$arr </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$some_array</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>&lt;input type="hidden" name="array" value="$arr" /&gt;<br /><br />you would want to use:<br /><br /><span class="default">&lt;?php<br />$arr </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$some_array</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span>&lt;input type="hidden" name="array" value='$arr' /&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92284">  <div class="votes">
    <div id="Vu92284">
    <a href="/manual/vote-note.php?id=92284&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd92284">
    <a href="/manual/vote-note.php?id=92284&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V92284" title="42% like this...">
    -3
    </div>
  </div>
  <a href="#92284" class="name">
  <strong class="user"><em>Alessandro Segala</em></strong></a><a class="genanchor" href="#92284"> &para;</a><div class="date" title="2009-07-17 08:18"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom92284">
<div class="phpcode"><code><span class="html">
I needed to serialize an array to store it inside a database.<br />I was looking for a fast, simple way to do serialization, and I came out with 2 options: serialize() or json_encode().<br /><br />I ran some benchmarks to see which is the faster, and, surprisingly, I found that serialize() is always between 46% and 96% SLOWER than json_encode().<br />So, if you don't need to serialize objects and have the json extension available, consider using it instead of serialize().</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117093">  <div class="votes">
    <div id="Vu117093">
    <a href="/manual/vote-note.php?id=117093&amp;page=function.serialize&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117093">
    <a href="/manual/vote-note.php?id=117093&amp;page=function.serialize&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117093" title="20% like this...">
    -3
    </div>
  </div>
  <a href="#117093" class="name">
  <strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#117093"> &para;</a><div class="date" title="2015-04-14 01:57"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom117093">
<div class="phpcode"><code><span class="html">
For everyone facing the conversion nightmare another Anonymous described here in an older comment (and he took the words out of my mouth), this T-SQL script might be of great help: <a href="https://github.com/mjohnsonperl/tsqlphpunserialize/tree/master." rel="nofollow" target="_blank">https://github.com/mjohnsonperl/tsqlphpunserialize/tree/master.</a><br /><br />Please do not follow the path of evil by dumping serialized data into relational databases.</span>
</code></div>
  </div>
 </div></div>

 <div class="foot"><a href="/manual/add-note.php?sect=function.serialize&amp;redirect=http://php.net/manual/zh/function.serialize.php"><img src='/images/notes-add@2x.png' alt='add a note' width='12' height='12'> <small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>
    
        <ul class='parent-menu-list'>
                                    <li>
                <a href="ref.var.php">Variable handling 函数</a>
    
                                    <ul class='child-menu-list'>
    
                          
                        <li class="">
                            <a href="function.boolval.php" title="boolval">boolval</a>
                        </li>
                          
                        <li class="">
                            <a href="function.debug-zval-dump.php" title="debug_&#8203;zval_&#8203;dump">debug_&#8203;zval_&#8203;dump</a>
                        </li>
                          
                        <li class="">
                            <a href="function.doubleval.php" title="doubleval">doubleval</a>
                        </li>
                          
                        <li class="">
                            <a href="function.empty.php" title="empty">empty</a>
                        </li>
                          
                        <li class="">
                            <a href="function.floatval.php" title="floatval">floatval</a>
                        </li>
                          
                        <li class="">
                            <a href="function.get-defined-vars.php" title="get_&#8203;defined_&#8203;vars">get_&#8203;defined_&#8203;vars</a>
                        </li>
                          
                        <li class="">
                            <a href="function.get-resource-type.php" title="get_&#8203;resource_&#8203;type">get_&#8203;resource_&#8203;type</a>
                        </li>
                          
                        <li class="">
                            <a href="function.gettype.php" title="gettype">gettype</a>
                        </li>
                          
                        <li class="">
                            <a href="function.import-request-variables.php" title="import_&#8203;request_&#8203;variables">import_&#8203;request_&#8203;variables</a>
                        </li>
                          
                        <li class="">
                            <a href="function.intval.php" title="intval">intval</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-array.php" title="is_&#8203;array">is_&#8203;array</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-bool.php" title="is_&#8203;bool">is_&#8203;bool</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-callable.php" title="is_&#8203;callable">is_&#8203;callable</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-double.php" title="is_&#8203;double">is_&#8203;double</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-float.php" title="is_&#8203;float">is_&#8203;float</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-int.php" title="is_&#8203;int">is_&#8203;int</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-integer.php" title="is_&#8203;integer">is_&#8203;integer</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-long.php" title="is_&#8203;long">is_&#8203;long</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-null.php" title="is_&#8203;null">is_&#8203;null</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-numeric.php" title="is_&#8203;numeric">is_&#8203;numeric</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-object.php" title="is_&#8203;object">is_&#8203;object</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-real.php" title="is_&#8203;real">is_&#8203;real</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-resource.php" title="is_&#8203;resource">is_&#8203;resource</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-scalar.php" title="is_&#8203;scalar">is_&#8203;scalar</a>
                        </li>
                          
                        <li class="">
                            <a href="function.is-string.php" title="is_&#8203;string">is_&#8203;string</a>
                        </li>
                          
                        <li class="">
                            <a href="function.isset.php" title="isset">isset</a>
                        </li>
                          
                        <li class="">
                            <a href="function.print-r.php" title="print_&#8203;r">print_&#8203;r</a>
                        </li>
                          
                        <li class="current">
                            <a href="function.serialize.php" title="serialize">serialize</a>
                        </li>
                          
                        <li class="">
                            <a href="function.settype.php" title="settype">settype</a>
                        </li>
                          
                        <li class="">
                            <a href="function.strval.php" title="strval">strval</a>
                        </li>
                          
                        <li class="">
                            <a href="function.unserialize.php" title="unserialize">unserialize</a>
                        </li>
                          
                        <li class="">
                            <a href="function.unset.php" title="unset">unset</a>
                        </li>
                          
                        <li class="">
                            <a href="function.var-dump.php" title="var_&#8203;dump">var_&#8203;dump</a>
                        </li>
                          
                        <li class="">
                            <a href="function.var-export.php" title="var_&#8203;export">var_&#8203;export</a>
                        </li>
                            
                    </ul>
                    
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->
         
  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="/copyright.php">Copyright &copy; 2001-2017 The PHP Group</a></li>
        <li><a href="/my.php">My PHP.net</a></li>
        <li><a href="/contact.php">Contact</a></li>
        <li><a href="/sites.php">Other PHP.net sites</a></li>
        <li><a href="/mirrors.php">Mirror sites</a></li>
        <li><a href="/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="http://php.net/cached.php?t=1421837618&amp;f=/js/ext/modernizr.js"></script>
<script type="text/javascript" src="http://php.net/cached.php?t=1421837618&amp;f=/js/ext/hogan-2.0.0.min.js"></script>
<script type="text/javascript" src="http://php.net/cached.php?t=1421837618&amp;f=/js/ext/typeahead.min.js"></script>
<script type="text/javascript" src="http://php.net/cached.php?t=1421837618&amp;f=/js/ext/mousetrap.min.js"></script>
<script type="text/javascript" src="http://php.net/cached.php?t=1421837618&amp;f=/js/search.js"></script>
<script type="text/javascript" src="http://php.net/cached.php?t=1478627406&amp;f=/js/common.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="/images/to-top@2x.png"></a>

</body>
</html>

