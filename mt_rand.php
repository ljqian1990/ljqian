<?php
function get_rand($arr) {
	$return = null;
	$sum = array_sum($arr);echo "sum=$sum\n\r";
	foreach($arr as $k => $v) {
		$randNum = mt_rand(1,$sum);echo "sum=$sum\n\r";echo "randNum=$randNum\n\r";echo "v=$v\n\r";
		if($randNum <= $v) {
			$return = $k;
			break;
		} else {
			$sum -= $v;
		}
	}
	unset($arr);
	return $return;
}

$arr = array(1,2,3,4,5,6,7,8,9,10);
echo get_rand($arr);
?>
 1:1/55															= 1/55
 2:54/55*2/54													= 2/55
 3:54/55*52/54*3/52												= 3/55	
 4:54/55*52/54*49/52*4/49										= 4/55
 5:54/55*52/54*49/52*45/49*5/45									= 5/55	
 6:54/55*52/54*49/52*45/49*40/45*6/40							= 6/55
 7:54/55*52/54*49/52*45/49*40/45*34/40*7/34						= 7/55
 8:54/55*52/54*49/52*45/49*40/45*34/40*27/34*8/27				= 8/55	
 9:54/55*52/54*49/52*45/49*40/45*34/40*27/34*19/27*9/19			= 9/55
10:54/55*52/54*49/52*45/49*40/45*34/40*27/34*19/27*10/19*10/10	= 10/55